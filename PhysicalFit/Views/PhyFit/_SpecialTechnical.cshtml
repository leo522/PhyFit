@model string

<table id="trainingMonitoringTable" class="table table-bordered">
    <thead>
        <tr>
            <th>課程名稱</th>
            <th>日期</th>
            <th>項目</th>
            <th>動作名稱</th>
            <th>訓練部位</th>
            <th>訓練類型</th>
            <th>其他</th>
            <th>時間</th>
            <th>自覺費力程度</th>
            <th>欄位增減</th>
        </tr>
    </thead>
    <tbody id="trainingMonitoringRows">
        <tr class="training-group">
            <td>
                <div class="form-group" style="display: inline-block; max-width: 100%;">
                    <select class="form-control" id="TrainingItem" name="TrainingItem" onchange="updateTableContent(this)" style="width: auto; min-width: 200px; display: inline-block;">
                        <option value="">請選擇課程名稱</option>
                        @foreach (var item in ViewBag.Description)
                        {
                            <option value="@item" style="width: 50px;">@item</option>
                        }
                    </select>
                </div>
            </td>
            <td>
                <input type="datetime-local" class="form-control" name="TrainingDate" title="日期"/>
            </td>
            <td>
                <select class="form-control" name="SpecialTech" onchange="updateTechnicalActions(this)" disabled>
                    <option>請選擇項目</option>
                    @foreach (var ST in ViewBag.SpecialTechnical)
                    {
                        <option value="@ST">@ST</option>
                    }
                </select>
            </td>
            <td>
                <select class="form-control" name="SpecialTechName" disabled>
                    <option>請選擇項目</option>
                </select>
            </td>
            <td>
                <select class="form-control" name="TrainingMuscle" disabled>
                    <option>請選擇訓練部位</option>
                    @foreach (var MS in ViewBag.MuscleStrength)
                    {
                        <option>@MS</option>
                    }
                </select>
            </td>
            <td>
                <select class="form-control" name="TrainingType" style="width:150px;" disabled>
                    <option>請選擇訓練類型</option>
                    @foreach (var PF in ViewBag.PhysicalFitness)
                    {
                        <option>@PF</option>
                    }
                </select>
            </td>
            <td>
                <input class="SpecialTechOther" name="SpecialTechOther" placeholder="請自行填選其他動作名稱" disabled />
            </td>
            <td>
                <select class="form-control" name="TrainingTime" style="width:150px;">
                    <option>請選擇訓練時間</option>
                    @foreach (var time in ViewBag.TrainingTimes)
                    {
                        <option>@time</option>
                    }
                </select>
            </td>
            <td>
                <input type="text" class="form-control rpeInput" name="RPE_Description" style="width:200px;" placeholder="請選擇訓練感受" readonly />
                <input type="hidden" name="RPE" />
                <button type="button" class="btn btn-info openRPEModal">運動自覺量表</button>
            </td>
            <td>
                <button type="button" class="btn btn-primary add-row">+</button>
                <button type="button" class="btn btn-danger remove-row" >-</button>
            </td>
        </tr>
    </tbody>
</table>

<script>
    function updateTableContent(selectElement) {
        
        var selectedItem = selectElement.value; // 取得選擇的課程名稱
        
        var row = selectElement.closest('tr'); // 使用 closest('tr') 限定只影響當前行的欄位

        var specialTechField = document.querySelector('select[name="SpecialTech"]'); //項目
        var specialTechNameField = document.querySelector('select[name="SpecialTechName"]'); //動作名稱
        var trainingMuscleField = document.querySelector('select[name="TrainingMuscle"]'); //訓練部位
        var trainingTypeField = document.querySelector('select[name="TrainingType"]'); //訓練類型
        var otherField = document.querySelector('input[name="SpecialTechOther"]'); //其他

        // 先禁用所有欄位
        [specialTechField, specialTechNameField, otherField, trainingMuscleField, trainingTypeField].forEach(function (field) {
            if (field) field.disabled = true;
        });

        // 根據選項來控制欄位啟用與否
        switch (selectedItem) {
            case "專項技術類":
                specialTechField.disabled = false;
                specialTechNameField.disabled = false;
                otherField.disabled = false;
                break;

            case "肌力類":
                trainingMuscleField.disabled = false;
                break;

            case "體能類":
                trainingTypeField.disabled = false;
                break;

            // 可以根據需要新增更多選項
            case "混合肌力體能類":
            default:

                // 其他情況下不啟用任何欄位
                break;
        }
    }
</script>
